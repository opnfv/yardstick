{% extends "execute_test/base.html" %}
{% block content %}
<h3><strong>Regression Results</strong></h3>
<h4><strong>Summary</strong></h4>
{% if reg_type == 'performance' %}
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
var tmp = "{{ graph_data }}".replace(/&quot;/g,'"');
var graph_data = JSON.parse(tmp.replace(/&quot;/g,'"'));
console.log(graph_data);
var keys = Object.keys(graph_data);
keys.forEach(function(key){
    console.log(key, graph_data[key]);
    google.charts.load('current', {'packages':['corechart']});
    google.charts.setOnLoadCallback(drawVisualization);
    function drawVisualization() {
    	var data = google.visualization.arrayToDataTable(graph_data[key]);
	var options = {
	    title : 'Throuput v/s Flow Count for '+key+' packet',
	    vAxis: {title: 'Throughput'},
	    hAxis: {title: 'Flow Count'},
	    seriesType: 'bars',
	};
	var chart = new google.visualization.ComboChart(document.getElementById('chart_'+key));
	chart.draw(data, options);
	document.getElementById('chart_'+key).className = 'show'
    }
		    });
</script>
<div id="chart_64b" style="height: 300px;"></div>
<div id="chart_1518b" style="height: 300px;" ></div>
<div id="chart_imix" style="height: 300px;" ></div>
{% endif %}
{% if reg_type != 'performance' %}
<table class="table table-bordered">
	<thead>
		<tr>
			<th>Total</th>
			<th>Passed</th>
			<th>Failed</th>
		</tr>
		</thead>
		<tbody>
		<tr>
			<td>{{ total_tc }}</td>
			<td>{{ total_pass }}</td>
			<td>{{ total_fail }}</td>
		</tr>
		</tbody>
	</table>


<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
google.charts.load('current', {'packages':['corechart']});
google.charts.setOnLoadCallback(drawChart);
function drawChart() {
	var data = google.visualization.arrayToDataTable([
			['Task', 'count'],
			['PASS',     {{ total_pass }}],
			['FAIL',     {{ total_fail }}],
			]);
	var options = {
		title: 'Regression Results',
	};
	var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
	chart.draw(data, options);
}
</script>
<div id="chart_div" style="height: 300px;"></div>
{% endif %}
<h4><strong>Testcase Details</strong></h4>
<table class="table table-bordered">
    <thead>
	    <tr>
		    <th>VNF</th>
		    <th>Test Case</th>
		    {% if reg_type != 'performance' %}
		    <th>Result</th>
		    {% else %}
		    <th>Throughput</th>
		    <th>Drop Percentage</th>
		    {% endif %}

	    </tr>
     </thead>
     <tbody>
{% for item  in data%}

	    <tr>
		    <td>{{ item.vnf | upper}}</td>
		    <td>{{ item.test_case }}</td>
		    {% if reg_type != 'performance' %}
		    <td>{{ item.result }}</td>
		    {% else %}
		    <td>{{ item.throughput }}
		    <td>{{ item.drop_percentage }}</td>
		    {% endif %}
	    </tr>
{% endfor %}
</tbody>
</table>
{% endblock content %}
