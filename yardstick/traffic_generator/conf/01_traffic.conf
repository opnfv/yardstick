# Copyright 2015-2017 Intel Corporation.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# ############################
# Traffic gen configuration
# ############################

# log file for all traffic generator related commands
LOG_FILE_TRAFFIC_GEN = 'traffic-gen.log'

# TRAFFIC dictionary defines traffic parameters used by all traffic generators.
# Detailed description of TRAFFIC dictionary items follows:
#
#    'traffic_type'  - One of the supported traffic types.
#                      E.g. rfc2544_throughput, rfc2544_back2back
#                      or rfc2544_continuous
#                      Data type: str
#                      Default value: "rfc2544_throughput".
#    'bidir'         - Specifies if generated traffic will be full-duplex (True)
#                      or half-duplex (False)
#                      Data type: str
#                      Supported values: "True", "False"
#                      Default value: "False".
#    'frame_rate'    - Defines desired percentage of frame rate used during
#                      continuous stream tests.
#                      Data type: int
#                      Default value: 100.
#    'multistream'   - Defines number of flows simulated by traffic generator.
#                      Value 0 disables multistream feature
#                      Data type: int
#                      Supported values: 0-65536 for 'L4' stream type
#                                        unlimited for 'L2' and 'L3' stream types
#                      Default value: 0.
#    'stream_type'   - Stream type is an extension of the "multistream" feature.
#                      If multistream is disabled, then stream type will be
#                      ignored. Stream type defines ISO OSI network layer used
#                      for simulation of multiple streams.
#                      Data type: str
#                      Supported values:
#                         "L2" - iteration of destination MAC address
#                         "L3" - iteration of destination IP address
#                         "L4" - iteration of destination port
#                                of selected transport protocol
#                      Default value: "L4".
#    'pre_installed_flows'
#                   -  Pre-installed flows is an extension of the "multistream"
#                      feature. If enabled, it will implicitly insert a flow
#                      for each stream. If multistream is disabled, then
#                      pre-installed flows will be ignored.
#                      Note: It is supported only for p2p deployment scenario.
#                      Data type: str
#                      Supported values:
#                         "Yes" - flows will be inserted into OVS
#                         "No"  - flows won't be inserted into OVS
#                      Default value: "No".
#    'flow_type'     - Defines flows complexity.
#                      Data type: str
#                      Supported values:
#                         "port" - flow is defined by ingress ports
#                         "IP"   - flow is defined by ingress ports
#                                  and src and dst IP addresses
#                      Default value: "port"
#    'l2'            - A dictionary with l2 network layer details. Supported
#                      values are:
#        'srcmac'    - Specifies source MAC address filled by traffic generator.
#                      NOTE: It can be modified by vsperf in some scenarios.
#                      Data type: str
#                      Default value: "00:00:00:00:00:00".
#        'dstmac'    - Specifies destination MAC address filled by traffic generator.
#                      NOTE: It can be modified by vsperf in some scenarios.
#                      Data type: str
#                      Default value: "00:00:00:00:00:00".
#        'framesize' - Specifies default frame size. This value should not be
#                      changed directly. It will be overridden during testcase
#                      execution by values specified by list TRAFFICGEN_PKT_SIZES.
#                      Data type: int
#                      Default value: 64
#    'l3'            - A dictionary with l3 network layer details. Supported
#                      values are:
#        'enabled'   - Specifies if l3 layer should be enabled or disabled.
#                      Data type: bool
#                      Default value: True
#                      NOTE: Supported only by IxNet trafficgen class
#        'srcip'     - Specifies source MAC address filled by traffic generator.
#                      NOTE: It can be modified by vsperf in some scenarios.
#                      Data type: str
#                      Default value: "1.1.1.1".
#        'dstip'     - Specifies destination MAC address filled by traffic generator.
#                      NOTE: It can be modified by vsperf in some scenarios.
#                      Data type: str
#                      Default value: "90.90.90.90".
#        'proto'     - Specifies deflaut protocol type.
#                      Please check particular traffic generator implementation
#                      for supported protocol types.
#                      Data type: str
#                      Default value: "udp".
#    'l4'            - A dictionary with l4 network layer details. Supported
#                      values are:
#        'enabled'   - Specifies if l4 layer should be enabled or disabled.
#                      Data type: bool
#                      Default value: True
#                      NOTE: Supported only by IxNet trafficgen class
#        'srcport'   - Specifies source port of selected transport protocol.
#                      NOTE: It can be modified by vsperf in some scenarios.
#                      Data type: int
#                      Default value: 3000
#        'dstport'   - Specifies destination port of selected transport protocol.
#                      NOTE: It can be modified by vsperf in some scenarios.
#                      Data type: int
#                      Default value: 3001
#    'vlan'          - A dictionary with vlan encapsulation details. Supported
#                      values are:
#        'enabled'   - Specifies if vlan encapsulation should be enabled or
#                      disabled.
#                      Data type: bool
#                      Default value: False
#        'id'        - Specifies vlan id.
#                      Data type: int (NOTE: must fit to 12 bits)
#                      Default value: 0
#        'priority'  - Specifies a vlan priority (PCP header field).
#                      Data type: int (NOTE: must fit to 3 bits)
#                      Default value: 0
#        'cfi'       - Specifies if frames can or cannot be dropped during
#                      congestion (DEI header field).
#                      Data type: int (NOTE: must fit to 1 bit)
#                      Default value: 0

TRAFFIC = {
    'traffic_type' : 'rfc3511_continuous',
    'frame_rate' : 100,
    'bidir' : 'True',  # will be passed as string in title format to tgen
    'multistream' : 0,
    'stream_type' : 'L4',
    'pre_installed_flows' : 'No',
    'flow_type' : 'port',
'uplink': {
    'l2': {
        'framesize': 64,
        'srcmac': '3c:fd:fe:9e:64:20',
        'dstmac': '3c:fd:fe:a0:d3:42',
    },
    'l3': {
        'enabled': True,
        'proto': 'udp',
        'srcip': '152.16.100.20',
        'dstip': '152.40.40.20',
    },
    'l4': {
        'enabled': True,
        'srcport': 3000,
        'dstport': 3001,
    },
    'vlan': {
        'enabled': False,
        'id': 0,
        'priority': 0,
        'cfi': 0,
    },
  },
'downlink': {
    'l2': {
        'framesize': 64,
        'srcmac': '3c:fd:fe:9e:64:21',
        'dstmac': '3c:fd:fe:a0:d3:43',
    },
    'l3': {
        'enabled': True,
        'proto': 'udp',
        'srcip': '152.40.40.20',
        'dstip': '152.16.100.20',
    },
    'l4': {
        'enabled': True,
        'srcport': 3001,
        'dstport': 3000,
    },
    'vlan': {
        'enabled': False,
        'id': 0,
        'priority': 0,
        'cfi': 0,
    },
  },
}

#path to traffic generators directory.
TRAFFICGEN_DIR = os.path.join(ROOT_DIR, 'tools/pkt_gen')
TRAFFICGEN_PKT_SIZES = (64,)

TRAFFICGEN_DURATION = 30

TRAFFICGEN_RFC2544_TESTS = 1
TRAFFICGEN_RFC3511_TESTS = 1
TRAFFICGEN_RFC2889_TRIALS = 1
TRAFFICGEN_LOSSRATE = 0.0


