[[local|localrc]]
HOST_IP=192.168.2.7       # CHANGE: HOST IP ADDRESS
ADMIN_PASSWORD=password
MYSQL_PASSWORD=$ADMIN_PASSWORD
DATABASE_PASSWORD=$ADMIN_PASSWORD
RABBIT_PASSWORD=$ADMIN_PASSWORD
SERVICE_PASSWORD=$ADMIN_PASSWORD
HORIZON_PASSWORD=$ADMIN_PASSWORD

# Internet access.
RECLONE=False
PIP_UPGRADE=True
IP_VERSION=4

# Services
disable_service n-net
ENABLED_SERVICES+=,q-svc,q-dhcp,q-meta,q-agt,q-sriov-agt

# Heat
enable_plugin heat https://git.openstack.org/openstack/heat stable/pike

# Neutron
enable_plugin neutron https://git.openstack.org/openstack/neutron.git stable/pike

# Neutron Options
FLOATING_RANGE="192.168.2.0/24"
Q_FLOATING_ALLOCATION_POOL=start=192.168.2.100,end=192.168.2.254
PUBLIC_NETWORK_GATEWAY="192.168.2.1"
PUBLIC_INTERFACE=enp24s0f3    # CHANGE: PUBLIC INTERFACE

# ML2 Configuration
Q_PLUGIN=ml2
Q_ML2_PLUGIN_MECHANISM_DRIVERS=openvswitch,sriovnicswitch
Q_ML2_PLUGIN_TYPE_DRIVERS=vlan,flat,local,vxlan,gre,geneve

# Open vSwitch provider networking configuration
Q_USE_PROVIDERNET_FOR_PUBLIC=True
OVS_PHYSICAL_BRIDGE=br-ex
OVS_BRIDGE_MAPPINGS=public:br-ex
PHYSICAL_DEVICE_MAPPINGS=physnet1:enp24s0f0,physnet2:enp24s0f1   # CHANGE: PHYSICAL INTEFACE MAPPING TO PHYSICAL NETWORKS
PHYSICAL_NETWORK=physnet1,physnet2


[[post-config|$NOVA_CONF]]
[DEFAULT]
scheduler_default_filters=RamFilter,ComputeFilter,AvailabilityZoneFilter,ComputeCapabilitiesFilter,ImagePropertiesFilter,PciPassthroughFilter
# Whitelist PCI devices
pci_passthrough_whitelist = {\\"devname\\": \\"enp24s0f0\\", \\"physical_network\\": \\"physnet1\\" }   # CHANGE: PF0 interface name
pci_passthrough_whitelist = {\\"devname\\": \\"enp24s0f1\\", \\"physical_network\\": \\"physnet2\\" }   # CHANGE: PF1 interface name

[filter_scheduler]
enabled_filters = RetryFilter,AvailabilityZoneFilter,RamFilter,DiskFilter,ComputeFilter,ComputeCapabilitiesFilter,ImagePropertiesFilter,ServerGroupAntiAffinityFilter,ServerGroupAffinityFilter,SameHostFilter

[libvirt]
cpu_mode = host-model


# ML2 plugin bits for SR-IOV enablement of Intel Corporation XL710/X710 Virtual Function
[[post-config|/$Q_PLUGIN_CONF_FILE]]
[ml2_sriov]
agent_required = True
supported_pci_vendor_devs = 8086:154c   # CHANGE: THIS SHOULD BE DEV ID, VENDOR ID OF VF INTERFACES.
                                        # USE ``lspci | grep Ether`` & ``lspci -n | grep <PCI ADDRESS>``
                                        # COMMANDS TO GET THIS INFO.
